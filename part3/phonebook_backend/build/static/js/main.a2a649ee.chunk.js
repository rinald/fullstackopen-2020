(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,t,n){"use strict";n.r(t);var o=n(17),r=n(3),c=n(0),u=n(2),i=n(16),a=n.n(i),s=n(5),l=n.n(s),d=(n(41),"/api/people"),f=function(){return l.a.get(d).then((function(e){return e.data}))},b=function(e){return l.a.post(d,e).then((function(e){return e.data}))},j=function(e,t){return l.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},m=function(e){return l.a.delete("".concat(d,"/").concat(e))},h=function(e){var t=e.status;return null===t?null:Object(c.jsx)("div",{className:t.outcome,children:t.message})};t.default=h;var O=function(e){var t=e.text,n=e.controller,o=Object(r.a)(n,2),u=o[0],i=o[1];return Object(c.jsxs)("div",{children:[t," ",Object(c.jsx)("input",{value:u,onChange:function(e){i(e.target.value)}})]})},p=function(e){var t=e.controller;return Object(c.jsx)(O,{text:"filter shown with ",controller:t})},x=function(e){var t=e.nameController,n=e.numberController,o=e.onSubmit;return Object(c.jsxs)("form",{onSubmit:o,children:[Object(c.jsx)(O,{text:"name: ",controller:t}),Object(c.jsx)(O,{text:"number: ",controller:n}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var t=e.people,n=e.filter,o=e.onDelete;return t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){var t=e.name,n=e.number,r=e.id;return Object(c.jsxs)("div",{children:[t," ",n,Object(c.jsx)("button",{onClick:function(){return o(r)},children:"delete"})]},t)}))},w=function(){var e=Object(u.useState)([]),t=Object(r.a)(e,2),n=t[0],i=t[1],a=Object(u.useState)(""),s=Object(r.a)(a,2),l=s[0],d=s[1],O=Object(u.useState)(""),w=Object(r.a)(O,2),g=w[0],C=w[1],S=Object(u.useState)(""),k=Object(r.a)(S,2),T=k[0],y=k[1],D=Object(u.useState)(null),A=Object(r.a)(D,2),E=A[0],J=A[1];Object(u.useEffect)((function(){f().then((function(e){return i(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(h,{status:E}),Object(c.jsx)(p,{controller:[T,y]}),Object(c.jsx)("h3",{children:"Add a new"}),Object(c.jsx)(x,{onSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name===l}));if(t){if(t.number=g,!window.confirm("".concat(l," is already added to phonebook. Replace the old number with a new one?")))return;j(t.id,t).then((function(e){i(n.map((function(n){return n.id!==t.id?n:e}))),J({message:"Updated ".concat(e.name,"'s phone number"),outcome:"success"}),d(""),C(""),setTimeout((function(){J(null)}),5e3)})).catch((function(e){void 0===e.response.data.error?(J({message:"".concat(t.name,"'s information has already been removed from server"),outcome:"error"}),setTimeout((function(){J(null)}),5e3),i(n.filter((function(e){return e.id!==t.id})))):(J({message:e.response.data.error,outcome:"error"}),setTimeout((function(){J(null)}),5e3))}))}else b({name:l,number:g}).then((function(e){i([].concat(Object(o.a)(n),[e])),J({message:"Added ".concat(e.name),outcome:"success"}),d(""),C(""),setTimeout((function(){J(null)}),5e3)})).catch((function(e){J({message:e.response.data.error,outcome:"error"}),setTimeout((function(){J(null)}),5e3)}))},nameController:[l,d],numberController:[g,C]}),Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)(v,{people:n,filter:T,onDelete:function(e){window.confirm("Delete ".concat(n.find((function(t){return t.id===e})).name))&&m(e).then((function(){i(n.filter((function(t){return t.id!==e})))}))}})]})};a.a.render(Object(c.jsx)(w,{}),document.getElementById("root"))},41:function(e,t,n){}},[[18,1,2]]]);
//# sourceMappingURL=main.a2a649ee.chunk.js.map